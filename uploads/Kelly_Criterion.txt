Kelly Criterion

fi

A scienti c gambling method

Objective

1. Understand what is the Kelly Criterion

Objective

1. Understand what is the Kelly Criterion
2. How to implement it to invest

Objective

1. Understand what is the Kelly Criterion
2. How to implement it to invest
3. Become a stock market genius ü§°

The big picture
‚Ä¢ You have a biased coin that lands heads up with probability 0.6

The big picture
‚Ä¢ You have a biased coin that lands heads up with probability 0.6
‚Ä¢ Bob is willing to bet any amount against you at evens

The big picture
‚Ä¢ You have a biased coin that lands heads up with probability 0.6
‚Ä¢ Bob is willing to bet any amount against you at evens
‚Ä¢ He is also willing to play any number of times

The big picture
‚Ä¢ You have a biased coin that lands heads up with probability 0.6
‚Ä¢ Bob is willing to bet any amount against you at evens
‚Ä¢ He is also willing to play any number of times
‚Ä¢ Bob is clearly not a genius and you have an opportunity to make some
good money here

The big picture
‚Ä¢ You have a biased coin that lands heads up with probability 0.6
‚Ä¢ Bob is willing to bet any amount against you at evens
‚Ä¢ He is also willing to play any number of times
‚Ä¢ Bob is clearly not a genius and you have an opportunity to make some
good money here

‚Ä¢ Say you have 1000$ in your bankroll
‚Ä¢ Problem: How much of your bankroll should you bet each round?

Question: How would YOU bet?ü§î
Type your reply on slido.com with the code #2814069

This is exactly the problem the Kelly Criterion solves:

How much of your bankroll should you bet?

Deriving the formula

What do you think will be our variables?
Keep in mind that we are looking for a formula that tells us the optimal amount we should bet‚Ä¶
You can also get some inspiration from the data given in our biased coin example
Type your reply on slido.com with the code #2814069

Deriving the formula
‚Ä¢ What are our variables?

fi

‚Ä¢ f = the percentage of our total capital we invest (aka what we want to nd)

Deriving the formula
‚Ä¢ What are our variables?
‚Ä¢ f = the percentage of our total capital we invest (aka what we want to nd)

fi

‚Ä¢ p = the probability that our investment succeed

Deriving the formula
‚Ä¢ What are our variables?
‚Ä¢ f = the percentage of our total capital we invest (aka what we want to nd)
‚Ä¢ p = the probability that our investment succeed

fi

‚Ä¢ q = the probability that our investment fail

Deriving the formula
‚Ä¢ What are our variables?
‚Ä¢ f = the percentage of our total capital we invest (aka what we want to nd)
‚Ä¢ p = the probability that our investment succeed
‚Ä¢ q = the probability that our investment fail

fi

‚Ä¢ a = the return if our investment fails

Deriving the formula
‚Ä¢ What are our variables?
‚Ä¢ f = the percentage of our total capital we invest (aka what we want to nd)
‚Ä¢ p = the probability that our investment succeed
‚Ä¢ q = the probability that our investment fail
‚Ä¢ a = the return if our investment fails

fi

‚Ä¢ b = the return if our investment succeed

Deriving the formula
‚Ä¢ What are our variables?
‚Ä¢ f = the percentage of our total capital we invest (aka what we want to nd)
‚Ä¢ p = the probability that our investment succeed
‚Ä¢ q = the probability that our investment fail

‚Ä¢ b = the return if our investment succeed

Not things we know for sure‚Ä¶

fi

‚Ä¢ a = the return if our investment fails

Keep in mind that these are
assumptions!!

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

The expected geometric growth rate
Aka how much gain can we expect in terms of f

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

Deja vu?

n
k n‚àík
‚ãÖp q
(k)

The expected geometric growth rate
Aka how much gain can we expect in terms of f

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

The expected geometric growth rate
Aka how much gain can we expect in terms of f

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

We set:

p = 0.6
q = 0.4
a = 0.8
b = 1.3

Expected geometric growth
rate r

The expected geometric growth rate
Aka how much gain can we expect in terms of f

0.1
0.075
0.05
0.025
0
-0.025
-0.05
-0.075

0.1

0.3

0.5

0.7

0.9

Proportion of bankroll invested f

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Question:
From this chart can you guess which proportion of your bankroll should you bet? ü§î

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

We set:

p = 0.6
q = 0.4
a = 0.8
b = 1.3

Expected geometric growth
rate r

The expected geometric growth rate
Aka how much gain can we expect in terms of f

0.1
0.075
0.05
0.025
0
-0.025
-0.05
-0.075

0.1

r is maximized at this point!!
When f ‚âà 0.4

0.3

0.5

0.7

0.9

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
This is cool but we can do better üòè
Let‚Äôs nd a closed form solution to this problem!!
Objective: Find the value f that maximizes r (our return)

fi

For that we will need to take the derivative of r‚Ä¶

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

E = ln (r) = pln (1 + fb) + q ln (1 ‚àí fa)
We apply log here to make the di erentiation easier

ff

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

E = ln (r) = pln (1 + fb) + q ln (1 ‚àí fa)

dE
df

f=f*

pb
‚àíqa
=
+
=0
1 + f*b 1 ‚àí f*a

We di erentiate‚Ä¶
Trust me or you can try at home!

ff

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

E = ln (r) = pln (1 + fb) + q ln (1 ‚àí fa)

dE
df

f=f*

pb
‚àíqa
=
+
=0
1 + f*b 1 ‚àí f*a

Slope = 0

The max
of the r curve

We di erentiate‚Ä¶
Trust me or you can try at home!

ff

Note: f* is the optimal f we are looking for

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

Deriving the formula
r = (1 + fb) (1 ‚àí fa)
p

q

E = ln (r) = pln (1 + fb) + q ln (1 ‚àí fa)
dE
df

f=f*

pb
‚àíqa
=
+
=0
1 + f*b 1 ‚àí f*a
After cleaning a bit we get‚Ä¶

p q
f*= ‚àí
a b
Hooray!!

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

The Kelly Criterion
p q
f*= ‚àí
a b
with

f = the percentage of our total capital we invest
p = the probability that our investment succeed
q = the probability that our investment fail
a = the return if our investment fails
b = the return if our investment fails succeed

But‚Ä¶

Who is that Kelly?

A bit of background ü•±
‚Ä¢ John Kelly was an American scientist at Bell Labs.
‚Ä¢ He published numerous works on the application of information theory to
game theory.

‚Ä¢ He introduced the Kelly criterion around 1956, which had a huge impact
on the gambling and investment industry.

‚Ä¢ It is said that renowned investors such as Warren Bu et, Bill Gross, and

ff

Jim Simons use a variation of this formula for their own investments...

Application of the Kelly Criterion
There is a stock called TZLA.
It has a 0.7 probability to go up and if it does, it will bring me about 30% of return.
Otherwise if it goes down, I‚Äôll loose about 10% of my money.

Application of the Kelly Criterion
There is a stock called TZLA.
It has a 0.7 probability to go up and if it does, it will bring me about 30% of return.
Otherwise if it goes down, I‚Äôll loose about 10% of my money.

This means that we have:
‚Ä¢ p = 0.7
‚Ä¢ q = 1 - 0.7 = 0.3
‚Ä¢ a = 1 - 0.1 = 0.9
‚Ä¢ b = 1 + 0.3 = 1.3

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

Application of the Kelly Criterion
There is a stock called TZLA.
It has a 0.7 probability to go up and if it does, it will bring me about 30% of return.
Otherwise if it goes down, I‚Äôll loose about 10% of my money. What

This means that we have:
‚Ä¢ p = 0.7
‚Ä¢ q = 1 - 0.7 = 0.3
‚Ä¢ a = 1 - 0.1 = 0.9
‚Ä¢ b = 1 + 0.3 = 1.3

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

p q 0.7 0.3
f*= ‚àí =
‚àí
= 0.547
a b 0.9 1.3
Investing 54.7% of our bankroll in
this stock would be optimal!

Now it‚Äôs your turn!

Exercise 1
There is a stock called ZZZ.
It has a 40% probability to go down and if it does, my return would be of 0.8 (or -20%).
Otherwise if it goes up, my bankroll would be multiplied by two!
How much of my bankroll should I invest on this stock?

Reminders

p q
f*= ‚àí
a b

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

Exercise 1 solution
There is a stock called ZZZ.
It has a 40% probability to go down and if it does, my return would be of 0.8 (or -20%).
Otherwise if it goes up, my bankroll would be multiplied by two!
How much of my bankroll should I invest on this stock?

This means that we have:
‚Ä¢ p = 1 - 0.4 = 0.6
‚Ä¢ q = 0.4
‚Ä¢ a = 1 - 0.2 = 0.8
‚Ä¢ b=1+1=2

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

Exercise 1 solution
There is a stock called ZZZ.
It has a 40% probability to go down and if it does, my return would be of 0.8 (or -20%).
Otherwise if it goes up, my bankroll would be multiplied by two!
How much of my bankroll should I invest on this stock?

This means that we have:
‚Ä¢ p = 1 - 0.4 = 0.6
‚Ä¢ q = 0.4
‚Ä¢ a = 1 - 0.2 = 0.8
‚Ä¢ b=1+1=2

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

p q 0.6 0.4
f*= ‚àí =
‚àí
= 0.55
a b 0.8
2
Investing 55% of our bankroll in
this stock would be optimal!

But most of the time, we don‚Äôt use this percentage!

Why don‚Äôt we use ‚Äúfull kelly‚Äù?
‚Ä¢ 1st reason: Kelly Criterion is a very aggressive approach to investing
‚òπ

Many uncertainties:
‚Ä¢ Based on assumptions
‚Ä¢ Stock market is unpredictable
‚Ä¢ Being conservative is safer

‚ò†
üôÇ

üò±

Why we don‚Äôt use ‚Äúfull kelly‚Äù?
‚Ä¢ 2nd reason: Most of the time, you want to invest in multiple stocks and
the Kelly Criterion makes it di cult.

‚Ä¢ Remember, it previously asked us to invest 55% of our bankroll in one
asset.

‚Ä¢ Risky and less diversi ed

ffi

fi

‚ÄúDo not put all your eggs in one basket‚Äù

But we still use Kelly Criterion but in another form:
FRACTIONAL KELLY! ü•≥

How does fractional Kelly works?
‚Ä¢ It‚Äôs quite simple
Step 2

Step 1
Calculate the Kelly Criterion as usual

fi

p q
f*= ‚àí
a b

Divide it by a speci c number k
Often 2, 3, 4, or 8

f*
f ** =
k

Some nomenclature
‚ÄúHalf-Kelly‚Äù

f*
2

‚ÄúThird-Kelly‚Äù

f*
3

‚ÄúQuarter-Kelly‚Äù

f*
4

‚ÄúEight-Kelly‚Äù

f*
8

fi

Bene ts of using fractional Kelly

Exercise 2
There is a stock called MNO.
It has a 50% probability to go down and if it does, my return would be of 0.9 (or -10%).
Otherwise if it goes up, my return would be of 20%.
How much of my bankroll should I invest on this stock? Use Half-Kelly!

Reminders

p q
f*= ‚àí
a b

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

Exercise 2 solution
There is a stock called MNO.
It has a 50% probability to go down and if it does, my return would be of 0.9 (or -10%).
Otherwise if it goes up, my return would be of 20%.
How much of my bankroll should I invest on this stock? Use Half-Kelly!

This means that we have:
‚Ä¢ p = 1 - 0.5 = 0.5
‚Ä¢ q = 0.5
‚Ä¢ a = 1 - 0.1 = 0.9
‚Ä¢ b = 1 + 0.2 = 1.2

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

Exercise 2 solution
There is a stock called MNO.
It has a 50% probability to go down and if it does, my return would be of 0.9 (or -10%).
Otherwise if it goes up, my return would be of 20%.
How much of my bankroll should I invest on this stock? Use Half-Kelly!

This means that we have:
‚Ä¢ p = 1 - 0.5 = 0.5
‚Ä¢ q = 0.5
‚Ä¢ a = 1 - 0.1 = 0.9
‚Ä¢ b = 1 + 0.2 = 1.2

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

p q 0.5 0.5
f*= ‚àí =
‚àí
= 0.1388..
a b 0.9 1.2

Exercise 2 solution
There is a stock called MNO.
It has a 50% probability to go down and if it does, my return would be of 0.9 (or -10%).
Otherwise if it goes up, my return would be of 20%.
How much of my bankroll should I invest on this stock? Use Half-Kelly!

This means that we have:
‚Ä¢ p = 1 - 0.5 = 0.5
‚Ä¢ q = 0.5
‚Ä¢ a = 1 - 0.1 = 0.9
‚Ä¢ b = 1 + 0.2 = 1.2

p q 0.5 0.5
f*= ‚àí =
‚àí
= 0.1388..
a b 0.9 1.2
Divide by 2 since
we use Half-Kelly

f = the percentage of our total capital we invest
p = the probability that our investment will succeed
q = the probability that our investment will fail
a = the return if our investment fails
b = the return if our investment succeeds

f*
0.1388
f ** =
=
= 0.06944...
2
2

There is even more to it!

A more advanced formula
Œº
f*= 2
œÉ
with

¬µ = expected return
œÉ = the standard deviation (volatility)

Degree to which a stock
price moves

Exercise 3
There is a stock called BBQ.
It is expected to grow by 30% and has a standard deviation of 15%. Use the new Kelly
Criterion formula to nd the amount of money we should allocate to this stock.

fi

Œº
f*= 2
œÉ

¬µ = expected return
œÉ = the standard deviation (volatility)

Exercise 3 Solution
There is a stock called BBQ.
It is expected to grow by 15% and has a standard deviation of 20%. Use the new Kelly
Criterion formula to nd the amount of money we should allocate to this stock.

fi

This means that we have:
‚Ä¢ ¬µ = 1.15
‚Ä¢ œÉ = 0.20

Exercise 3 Solution
There is a stock called BBQ.
It is expected to grow by 15% and has a standard deviation of 20%. Use the new Kelly
Criterion formula to nd the amount of money we should allocate to this stock.

This means that we have:
‚Ä¢ ¬µ = 1.15
‚Ä¢ œÉ = 0.20

Œº
1.15
f*= 2 =
=
28.75
2
œÉ
0.20

fi

28.75????
28.75%? No!
So 28.75 times what?

Exercise 3 Solution
There is a stock called BBQ.
It is expected to grow by 15% and has a standard deviation of 20%. Use the new Kelly
Criterion formula to nd the amount of money we should allocate to this stock.

This means that we have:
‚Ä¢ ¬µ = 1.15
‚Ä¢ œÉ = 0.20

Œº
1.15
f*= 2 =
=
28.75
2
œÉ
0.20

fi

28.75 times
your BANKROLL!

28.75????
28.75%? No!
So 28.75 times what?

Exercise 3 Solution
There is a stock called BBQ.
It is expected to grow by 15% and has a standard deviation of 20%. Use the new Kelly
Criterion formula to nd the amount of money we should allocate to this stock.

This means that we have:
‚Ä¢ ¬µ = 1.15
‚Ä¢ œÉ = 0.20

This can be done by using an
investment strategy called leverage
Leverage

fi

refers to the use of debt (borrowed funds) to
amplify returns from an investment or project.

Œº
1.15
f*= 2 =
=
28.75
2
œÉ
0.20

28.75 times
your BANKROLL!

28.75????
28.75%? No!
So 28.75 times what?

Question: Why isn‚Äôt everyone making money then?ü§î
Type your reply on slido.com with the code #2814069

Why isn‚Äôt everyone making money??
‚Ä¢ Kelly's criterion is based on assumptions that, if false, can mislead you
‚Ä¢ We are human! When we make money on a speci c position, it's hard to
be disciplined enough to not invest even more on it

fi

‚Ä¢ Risky in the short term

Conclusion
‚Ä¢ Kelly's criterion is a mathematical formula that allows us to know how

much money to place on a stock (or a bet) given its probability of success
and its positive and negative outcomes.

‚Ä¢ Using Kelly's criterion is risky, that's why people usually consider ‚ÄúHalfKelly‚Äù instead.

‚Ä¢ It is based on assumptions and therefore cannot be 100% reliable.
‚Ä¢ In the long run, it is a fairly solid strategy that has performed well so far.

Want to learn more??

Fortune's Formula: The Untold Story of
the Scienti c Betting System

fi

That Beat the Casinos and Wall Street

The Kelly Capital Growth Investment
Criterion Theory and Practice

Thanks for your attention!
Hope you enjoyed it :)

